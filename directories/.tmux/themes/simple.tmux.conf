# Global
bg_dim='#293136'
bg0='#333c43'
bg1='#3a464c'
bg2='#434f55' # terminal bg color
bg3='#4d5960'
bg4='#555f66'
bg5='#5d6b66'
bg_red="#5c3f4f"
bg_visual="#59464c"
bg_yellow="#55544a"
bg_green="#48584e"
bg_blue="#3f5865"
red="#e67e80"
orange="#e69875"
yellow="#dbbc7f"
green='#a7c080'
blue="#7fbbb3"
aqua="#83c092"
purple="#d699b6"
fg='#d3c6aa'
statusline1="#a7c080"
statusline2="#d3c6aa"
statusline3="#e67e80"
gray0='#7a8478'
gray1='#859289'
gray2='#9da9a0'

# Semantic - these must be styleable
text_main=$fg
text_secondary=$gray1
text_strong=$bg0
bg_main=$bg3
bg_subtle=$bg1
bg_visual=$bg_red
bg_visual_indicator=$red
bg_active=$green
bg_secondary=$purple
bg_selected=$orange
bg_unselected=$blue
border_active=$orange
border_inactive=$bg_dim

# Component specific

# Window
active_window_index_bg=$bg_selected
active_window_index_fg=$text_strong
active_window_text_bg=$bg_subtle
active_window_text_fg=$text_secondary

inactive_window_index_bg=$bg_unselected
inactive_window_index_fg=$text_strong
inactive_window_text_bg=$bg_subtle
inactive_window_text_fg=$text_secondary

# Pane
pane_border_bg="default"
pane_border_fg=$border_inactive
pane_border_active_bg="default"
pane_border_active_fg=$border_active

# Status right
program_icon_bg=$bg_secondary
program_icon_fg=$text_strong
program_text_bg=$bg_subtle
program_text_fg=$text_secondary
session_icon_bg=$bg_active
session_icon_fg=$text_strong
session_text_bg=$bg_subtle
session_text_fg=$text_secondary

# Messages
message_style_fg=$text_main
message_style_bg="default"
# HACK: No idea what these 2 are so I put a horrible color so it's visible
message_command_style_fg="pink"
message_command_style_bg="yellow"

# Modes
mode_style_bg=$bg_visual

# Clock Mode
clock_color=$bg_active

# Definitions
#
# default window "#I:#W#{?window_flags,#{window_flags}, }"
# default status-right:  #{?window_bigger,[#{window_offset_x}#,#{window_offset_y}] ,}\"#{=21:pane_title}\" %H:%M %d-%b-%y

slanted_separator_left=" █"
slanted_separator_right="█"
separator_left=$slanted_separator_left
separator_right=$slanted_separator_right

# windows
set-window-option -g window-status-separator ''
set -g status-justify centre
set -g status-justify left

# *: current window flag removed
# -: last window flag replaced by (⦁)
# #: window activity flag replaced by ()
# ~: window silence flag replaced by ()
# !: window bell flag replaced by ()
# Z: window zoomed flag replaced by ()
# M: window zoomed flag replaced by ()
# FIXME: bell is broken
# TODO: Do activity and silent
flags="#{s/~/ /:#{s/M/ /:#{s/\\*//:#{s/-/ ⦁/:#{s/Z/ /:window_flags}}}}}"

## Inactive
inactive_window_index_style="#[bg=$inactive_window_index_bg,fg=$inactive_window_index_fg]"
inactive_window_text_style="#[bg=$inactive_window_text_bg,fg=$inactive_window_text_fg]"
### Index
inactive_window_index_separator_left="#[fg=$inactive_window_index_bg]${separator_left}#[]"
inactive_window_index="${inactive_window_index_separator_left}${inactive_window_index_style}#I "
### Text
inactive_window_text_separator_left="#[bg=$inactive_window_index_bg,fg=$inactive_window_text_bg]${separator_left}#[]"
inactive_window_text_separator_right="#[bg=default,fg=$inactive_window_text_bg]${separator_right}#[]"
inactive_window_text="${inactive_window_text_separator_left}${inactive_window_text_style}#{s|^$USER|~|:#{b:pane_current_path}}$flags${inactive_window_text_separator_right}"

## Active
active_window_index_style="#[bg=$active_window_index_bg,fg=$active_window_index_fg]"
active_window_text_style="#[bg=$active_window_text_bg,fg=$active_window_text_fg]"
### Index
active_window_index_separator_left="#[fg=$active_window_index_bg]${separator_left}#[]"
active_window_index="${active_window_index_separator_left}${active_window_index_style}#I "
### Text
active_window_text_separator_left="#[bg=$active_window_index_bg,fg=$active_window_text_bg]${separator_left}#[]"
active_window_text_separator_right="#[bg=default,fg=$active_window_text_bg]${separator_right}#[]"
active_window_text="${active_window_text_separator_left}${active_window_text_style}#{s|^$USER|~|:#{b:pane_current_path}}$flags${active_window_text_separator_right}"

set -g window-status-format "${inactive_window_index}${inactive_window_text}"
set -g window-status-current-format "${active_window_index}${active_window_text}"

# Status bar
set -g status-style bg=default
set -g status-position top

## status-left
# set -g status-left "" 
# uses \uec03 for drawing an empty character in order to center the window bar
# We use 37 characters which is approximate the same amount we have on the right hand
set -g status-left "#[fg=black,bg=default]                                                                                                                                                      " 
set -g status-left-length 80
# set -g status-left "#[fg=black,bg=default]" 
# set -g status-left-length 31

## status-right
# set -g status-right-length 55
# # We give 15 spaces to avoid jumping when length changes
# status_right_free_space="               "
set -g status-right-length 200
status_right_free_space=""

program_icon_separator_left="#[fg=$program_icon_bg]${separator_left}"
program_icon_style="#[bg=$program_icon_bg,fg=$program_icon_fg]"
program_icon="${program_icon_separator_left}${program_icon_style} "

program_text_separator_left="#[fg=$program_text_bg]${separator_left}"
program_text_separator_right="#[fg=$program_text_bg,bg=default]${separator_right}"
program_text_style="#[bg=$program_text_bg,fg=$program_text_fg]"
program_text="${program_text_separator_left}${program_text_style}#{window_name} ${program_text_separator_right}"

program="${program_icon}${program_text}#[bg=default]"

session_icon_separator_left="#[fg=$session_icon_bg]${separator_left}"
session_text_separator_right="#[fg=$session_text_bg,bg=default]${separator_right}"
session_icon_style="#[bg=$session_icon_bg,fg=$session_icon_fg]"
session_icon="${session_icon_separator_left}${session_icon_style} "

session_text_separator_left="#[fg=$session_text_bg]${separator_left}"
session_text_style="#[bg=$session_text_bg,fg=$session_text_fg]"
session_text="${session_text_separator_left}${session_text_style}#S${session_text_separator_right}"

mode_prompt_wait_icon="#[fg=$bg_visual_indicator]${separator_left}#[bg=$bg_visual_indicator#,fg=$text_strong]󰇘"
mode_prompt_copy_icon="#[fg=$bg_visual_indicator]${separator_left}#[bg=$bg_visual_indicator#,fg=$text_strong]"
mode_prompt_sync_icon="#[fg=$bg_visual_indicator]${separator_left}#[bg=$bg_visual_indicator#,fg=$text_strong]"

mode_prompt_wait="$mode_prompt_wait_icon #[bg=$bg_visual_indicator#,fg=$bg_subtle]${separator_left}#[bg=$bg_subtle#,fg=$text_secondary]Pending#[bg=default#,fg=$bg_subtle]${separator_right}"
mode_prompt_copy="$mode_prompt_copy_icon #[bg=$bg_visual_indicator#,fg=$bg_subtle]${separator_left}#[bg=$bg_subtle#,fg=$text_secondary]Copy#[bg=default#,fg=$bg_subtle]${separator_right}"
mode_prompt_sync="$mode_prompt_sync_icon #[bg=$bg_visual_indicator#,fg=$bg_subtle]${separator_left}#[bg=$bg_subtle#,fg=$text_secondary]Sync#[bg=default#,fg=$bg_subtle]${separator_right}"

# Real
mode_prompt_empty=""
mode_prompt="#{?client_prefix,$mode_prompt_wait,#{?pane_in_mode,$mode_prompt_copy,#{?pane_synchronized,$mode_prompt_sync,$mode_prompt_empty}}}"
mode="#{?#{||:#{client_prefix},#{pane_in_mode}},${mode_prompt},}"
mode="#{?#{||:#{||:#{client_prefix},#{pane_in_mode}},#{pane_synchronized}},${mode_prompt},}"

# Debug only
# mode_prompt_empty="#[fg=$bg_visual_indicator]${separator_left}#[bg=$bg_visual_indicator#,fg=$text_strong]#[]#[fg=$bg_visual_indicator#,bg=default]${separator_right}#[]"
# mode_prompt="#{?client_prefix,$mode_prompt_wait,#{?pane_in_mode,$mode_prompt_copy,#{?pane_synchronized,$mode_prompt_sync,$mode_prompt_empty}}}"
# mode=$mode_prompt

session="${session_icon}${session_text}"
set -g status-right "$status_right_free_space$mode$program$session "

# Panes
set -g pane-border-style bg=$pane_border_bg,fg=$pane_border_fg
set -g pane-active-border-style bg=$pane_border_active_bg,fg=$pane_border_active_fg
set -g display-panes-colour blue
set -g display-panes-active-colour red

# Messages
set -g message-style fg=$message_style_fg,bg=$message_style_bg
set -g message-command-style fg=$message_command_style_fg,bg=$message_command_style_bg

# Mode
set -g mode-style bg=$mode_style_bg

# Clock Mode
setw -g clock-mode-colour $clock_color
